(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{"5n2/":function(t,e){function s(t){return"function"==typeof t.value||(console.warn("[Vue-click-outside:] provided expression",t.expression,"is not a function."),!1)}function a(t){return void 0!==t.componentInstance&&t.componentInstance.$isServer}t.exports={bind:function(t,e,n){function o(e){if(n.context){var s=e.path||e.composedPath&&e.composedPath();s&&s.length>0&&s.unshift(e.target),t.contains(e.target)||function(t,e){if(!t||!e)return!1;for(var s=0,a=e.length;s<a;s++)try{if(t.contains(e[s]))return!0;if(e[s].contains(t))return!1}catch(t){return!1}return!1}(n.context.popupItem,s)||t.__vueClickOutside__.callback(e)}}s(e)&&(t.__vueClickOutside__={handler:o,callback:e.value},!a(n)&&document.addEventListener("click",o))},update:function(t,e){s(e)&&(t.__vueClickOutside__.callback=e.value)},unbind:function(t,e,s){!a(s)&&document.removeEventListener("click",t.__vueClickOutside__.handler),delete t.__vueClickOutside__}}},H7g7:function(t,e,s){"use strict";var a=s("OB6f");s.n(a).a},"KHd+":function(t,e,s){"use strict";function a(t,e,s,a,n,o,i,r){var l,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=s,u._compiled=!0),a&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),i?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(i)},u._ssrRegister=l):n&&(l=r?function(){n.call(this,this.$root.$options.shadowRoot)}:n),l)if(u.functional){u._injectStyles=l;var c=u.render;u.render=function(t,e){return l.call(e),c(t,e)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,l):[l]}return{exports:t,options:u}}s.d(e,"a",function(){return a})},OB6f:function(t,e,s){var a=s("g8on");"string"==typeof a&&(a=[[t.i,a,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};s("aET+")(a,n);a.locals&&(t.exports=a.locals)},PDwx:function(t,e,s){"use strict";s.r(e);var a=s("5n2/"),n={directives:{ClickOutside:s.n(a).a},props:{employee:{type:Object,default:null},notifications:{type:Array,default:null},statuses:{type:Array,default:null}},data:function(){return{modal:!1,search:"",updatedEmployee:Object}},computed:{filteredList:function(){var t=this;return this.statuses.filter(function(e){return e.name.toLowerCase().includes(t.search.toLowerCase())}).sort(function(t,e){return t.name<e.name?-1:t.name>e.name?1:0})}},created:function(){this.updatedEmployee=this.employee},mounted:function(){this.popupItem=this.$el},methods:{toggleModal:function(){this.modal=!1},assign:function(t){var e=this;axios.post("/"+this.$page.auth.company.id+"/employees/"+this.employee.id+"/employeestatuses",t).then(function(t){e.$snotify.success(e.$t("employee.status_modal_assign_success"),{timeout:2e3,showProgressBar:!0,closeOnClick:!0,pauseOnHover:!0}),e.updatedEmployee=t.data.data}).catch(function(t){e.form.errors=_.flatten(_.toArray(t.response.data))})},reset:function(t){var e=this;axios.delete("/"+this.$page.auth.company.id+"/employees/"+this.employee.id+"/employeestatuses/"+t.id).then(function(t){e.$snotify.success(e.$t("employee.status_modal_unassign_success"),{timeout:2e3,showProgressBar:!0,closeOnClick:!0,pauseOnHover:!0}),e.updatedEmployee=t.data.data}).catch(function(t){e.form.errors=_.flatten(_.toArray(t.response.data))})},isAssigned:function(t){return!!this.updatedEmployee.status&&this.updatedEmployee.status.id==t}}},o=(s("H7g7"),s("KHd+")),i=Object(o.a)(n,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"di relative"},[t.$page.auth.employee.permission_level<=200&&t.updatedEmployee.status?s("ul",{staticClass:"ma0 pa0 di existing-statuses"},[s("li",{staticClass:"bb b--dotted bt-0 bl-0 br-0 pointer di",attrs:{"data-cy":"open-status-modal"},on:{click:function(e){e.preventDefault(),t.modal=!0}}},[t._v("\n      "+t._s(t.$t("employee.status_title"))+"\n    ")]),t._v(" "),s("li",{staticClass:"di",attrs:{"data-cy":"status-name-right-permission"}},[t._v("\n      "+t._s(t.updatedEmployee.status.name)+"\n    ")])]):t._e(),t._v(" "),t.$page.auth.employee.permission_level>200&&t.updatedEmployee.status?s("ul",{staticClass:"ma0 pa0 existing-statuses di"},[s("li",{staticClass:"di"},[t._v("\n      "+t._s(t.$t("employee.status_title"))+"\n    ")]),t._v(" "),s("li",{staticClass:"di",attrs:{"data-cy":"status-name-wrong-permission"}},[t._v("\n      "+t._s(t.updatedEmployee.status.name)+"\n    ")])]):t._e(),t._v(" "),t.$page.auth.employee.permission_level<=200?s("a",{directives:[{name:"show",rawName:"v-show",value:!t.updatedEmployee.status,expression:"!updatedEmployee.status"}],staticClass:"pointer",attrs:{"data-cy":"open-status-modal-blank"},on:{click:function(e){e.preventDefault(),t.modal=!0}}},[t._v(t._s(t.$t("employee.status_modal_cta")))]):s("span",{directives:[{name:"show",rawName:"v-show",value:!t.updatedEmployee.status,expression:"!updatedEmployee.status"}]},[t._v(t._s(t.$t("employee.status_modal_blank")))]),t._v(" "),t.modal?s("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.toggleModal,expression:"toggleModal"}],staticClass:"popupmenu absolute br2 bg-white z-max tl bounceIn faster"},[s("div",{directives:[{name:"show",rawName:"v-show",value:0!=t.statuses.length,expression:"statuses.length != 0"}]},[s("p",{staticClass:"pa2 ma0 bb bb-gray"},[t._v("\n        "+t._s(t.$t("employee.status_modal_title"))+"\n      ")]),t._v(" "),s("form",{on:{submit:function(e){return e.preventDefault(),t.search(e)}}},[s("div",{staticClass:"relative pv2 ph2 bb bb-gray"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"br2 f5 w-100 ba b--black-40 pa2 outline-0",attrs:{id:"search",type:"text",name:"search",placeholder:t.$t("employee.status_modal_filter")},domProps:{value:t.search},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.toggleModal(e)},input:function(e){e.target.composing||(t.search=e.target.value)}}})])]),t._v(" "),s("ul",{staticClass:"pl0 list ma0 overflow-auto relative statuses-list"},[t._l(t.filteredList,function(e){return s("li",{key:e.id,attrs:{"data-cy":"list-status-"+e.id}},[t.isAssigned(e.id)?s("div",{staticClass:"pv2 ph3 bb bb-gray-hover bb-gray pointer relative",on:{click:function(s){return t.reset(e)}}},[t._v("\n            "+t._s(e.name)+"\n\n            "),s("img",{staticClass:"pr1 absolute right-1",attrs:{src:"/img/check.svg"}})]):s("div",{staticClass:"pv2 ph3 bb bb-gray-hover bb-gray pointer relative",on:{click:function(s){return t.assign(e)}}},[t._v("\n            "+t._s(e.name)+"\n          ")])])}),t._v(" "),s("li",[t.updatedEmployee.status?s("a",{staticClass:"pointer pv2 ph3 db no-underline c-delete bb-0",attrs:{"data-cy":"status-reset-button"},on:{click:function(e){return t.reset(t.updatedEmployee.status)}}},[t._v(t._s(t.$t("employee.status_modal_reset")))]):t._e()])],2)]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0==t.statuses.length,expression:"statuses.length == 0"}]},[s("p",{staticClass:"pa2 tc lh-copy",attrs:{"data-cy":"modal-blank-state-copy"}},[t._v("\n        "+t._s(t.$t("employee.status_modal_blank_title"))+" "),s("a",{attrs:{href:"/"+t.$page.auth.company.id+"/account/employeestatuses","data-cy":"modal-blank-state-cta"}},[t._v(t._s(t.$t("employee.status_modal_blank_cta")))])])])]):t._e()])},[],!1,null,"1cdd9d42",null);e.default=i.exports},g8on:function(t,e,s){(t.exports=s("I1BE")(!1)).push([t.i,"\n.statuses-list[data-v-1cdd9d42] {\n  max-height: 150px;\n}\n.popupmenu[data-v-1cdd9d42] {\n  right: 2px;\n  top: 26px;\n  width: 280px;\n}\n.c-delete[data-v-1cdd9d42]:hover {\n  border-bottom-width: 0;\n}\n.existing-statuses li[data-v-1cdd9d42]:not(:last-child) {\n  margin-right: 5px;\n}\n",""])}}]);