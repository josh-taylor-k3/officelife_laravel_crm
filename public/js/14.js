(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"77mq":function(t,e,a){var s=a("MJam");"string"==typeof s&&(s=[[t.i,s,""]]);var l={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(s,l);s.locals&&(t.exports=s.locals)},Eswu:function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,".error-explanation[data-v-df38947a] {\n  background-color: #fde0de;\n  border-color: #e2aba7;\n}\n.error[data-v-df38947a]:focus {\n  box-shadow: 0 0 0 1px #fff9f8;\n}\n.optional-badge[data-v-df38947a] {\n  border-radius: 4px;\n  color: #283e59;\n  background-color: #edf2f9;\n  padding: 3px 4px;\n}",""])},FUPM:function(t,e,a){var s=a("GqqJ");"string"==typeof s&&(s=[[t.i,s,""]]);var l={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(s,l);s.locals&&(t.exports=s.locals)},GqqJ:function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,".border-red[data-v-1482dffa] {\n  background-color: #fff5f5;\n  border-color: #fc8181;\n  color: #c53030;\n}",""])},JTYf:function(t,e,a){"use strict";var s=a("77mq");a.n(s).a},MJam:function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,".useful-link[data-v-b0d6e782] {\n  top: 4px;\n}",""])},PAcC:function(t,e,a){var s=a("Eswu");"string"==typeof s&&(s=[[t.i,s,""]]);var l={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(s,l);s.locals&&(t.exports=s.locals)},"SL/y":function(t,e,a){"use strict";var s=a("FUPM");a.n(s).a},Z84v:function(t,e,a){"use strict";a("zHN7");var s={components:{BallPulseLoader:a("mM8D").a},props:{text:{type:String,default:""},state:{type:String,default:""},classes:{type:String,default:""},cypressSelector:{type:String,default:""}}},l=a("KHd+"),n=Object(l.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"di"},[a("button",{class:t.classes,attrs:{name:"save",type:"submit","data-cy":t.cypressSelector}},["loading"==t.state?a("ball-pulse-loader",{attrs:{color:"#fff",size:"7px"}}):t._e(),t._v(" "),"loading"!=t.state?a("span",[t._v("\n      "+t._s(t.text)+"\n    ")]):t._e()],1)])}),[],!1,null,null,null);e.a=n.exports},l6R9:function(t,e,a){"use strict";var s=a("PAcC");a.n(s).a},"pF+r":function(t,e,a){"use strict";var s={inheritAttrs:!1,props:{id:{type:String,default:function(){return"text-input-".concat(this._uid)}},type:{type:String,default:"text"},value:{type:String,default:""},customRef:{type:String,default:"input"},name:{type:String,default:"input"},datacy:{type:String,default:""},placeholder:{type:String,default:""},help:{type:String,default:""},label:{type:String,default:""},required:{type:Boolean,default:!1},extraClassUpperDiv:{type:String,default:"mb3"},min:{type:Number,default:0},max:{type:Number,default:0},errors:{type:Array,default:function(){return[]}}},computed:{hasError:function(){return!!(this.errors.length>0&&this.required)}},methods:{focus:function(){this.$refs.input.focus()},select:function(){this.$refs.input.select()},setSelectionRange:function(t,e){this.$refs.input.setSelectionRange(t,e)},sendEscKey:function(){this.$emit("esc-key-pressed")}}},l=(a("l6R9"),a("KHd+")),n=Object(l.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.extraClassUpperDiv},[t.label?a("label",{staticClass:"db fw4 lh-copy f6",attrs:{for:t.id}},[t._v("\n    "+t._s(t.label)+"\n    "),t.required?t._e():a("span",{staticClass:"optional-badge f7"},[t._v("\n      "+t._s(t.$t("app.optional"))+"\n    ")])]):t._e(),t._v(" "),a("input",t._b({ref:t.customRef,staticClass:"br2 f5 w-100 ba b--black-40 pa2 outline-0",attrs:{id:t.id,required:t.required,type:t.type,name:t.name,max:t.max,min:t.min,placeholder:t.placeholder,"data-cy":t.datacy},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.sendEscKey(e)}}},"input",t.$attrs,!1)),t._v(" "),t.hasError?a("div",{staticClass:"error-explanation pa3 ba br3 mt1"},[t._v("\n    "+t._s(t.errors[0])+"\n  ")]):t._e(),t._v(" "),t.help?a("p",{staticClass:"f7 mb3 lh-title"},[t._v("\n    "+t._s(t.help)+"\n  ")]):t._e()])}),[],!1,null,"df38947a",null);e.a=n.exports},rrJu:function(t,e,a){"use strict";var s={props:{errors:{type:Array,default:function(){return[]}}}},l=(a("SL/y"),a("KHd+")),n=Object(l.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.errors.length>0?a("div",{staticClass:"border-red ba br3 pa3"},[a("p",{staticClass:"mv0 fw6"},[t._v(t._s(t.$t("app.error_title")))]),t._v(" "),a("p",{staticClass:"mb0"},[t._v(t._s(t.errors[0]))])]):t._e()}),[],!1,null,"1482dffa",null);e.a=n.exports},zs33:function(t,e,a){"use strict";a.r(e);var s=a("pF+r"),l=a("Z84v"),n=a("rrJu"),r={components:{TextInput:s.a,LoadingButton:l.a,Errors:n.a},props:{team:{type:Object,default:null},links:{type:Array,default:null},userBelongsToTheTeam:{type:Boolean,default:!1}},data:function(){return{addMode:!1,editMode:!1,form:{url:null,label:null,type:null,errors:[]},loadingState:"",updatedLinks:[]}},created:function(){this.updatedLinks=this.links},methods:{labelOrLink:function(t){return t.label?t.label:t.url},showEditMode:function(){this.editMode=!0},submit:function(){var t=this;this.loadingState="loading",axios.post("/"+this.$page.auth.company.id+"/teams/"+this.team.id+"/links",this.form).then((function(e){flash(t.$t("team.description_success"),"success"),t.updatedLinks.push(e.data.data),t.addMode=!1,t.loadingState=null,t.form.url=null,t.form.type=null,t.form.label=null})).catch((function(e){t.loadingState=null,t.form.errors=_.flatten(_.toArray(e.response.data))}))},removeLink:function(t){var e=this;axios.delete("/"+this.$page.auth.company.id+"/teams/"+this.team.id+"/links/"+t.id).then((function(t){flash(e.$t("team.team_lead_removed"),"success"),e.updatedLinks.splice(e.updatedLinks.findIndex((function(e){return e.id==t.data.data})),1),e.editMode=!1})).catch((function(t){e.form.errors=_.flatten(_.toArray(t.response.data))}))},teamMemberOrAtLeastHR:function(){return this.$page.auth.employee.permission_level<=200||0!=this.userBelongsToTheTeam}}},i=(a("JTYf"),a("KHd+")),o=Object(i.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ma0 pa3"},[a("p",{staticClass:"silver f6 ma0 mb1"},[t._v(t._s(t.$t("team.useful_link_title")))]),t._v(" "),a("ul",{staticClass:"list pl0 mb0"},[t._l(t.updatedLinks,(function(e){return a("li",{key:e.id,staticClass:"mb2 relative",attrs:{"data-cy":"team-useful-link-"+e.id}},["slack"==e.type?a("img",{staticClass:"relative useful-link",attrs:{src:"/img/slack.svg","data-cy":"team-useful-link-logo-slack-"+e.id}}):t._e(),t._v(" "),"email"==e.type?a("img",{staticClass:"relative useful-link",attrs:{src:"/img/mail.svg","data-cy":"team-useful-link-logo-email-"+e.id}}):t._e(),t._v(" "),"url"==e.type?a("img",{staticClass:"relative useful-link",attrs:{src:"/img/url.svg","data-cy":"team-useful-link-logo-url-"+e.id}}):t._e(),t._v(" "),t.editMode?t._e():["url"==e.type||"slack"==e.type?a("a",{staticClass:"relative ml1",attrs:{href:e.url}},[t._v(t._s(t.labelOrLink(e)))]):t._e(),t._v(" "),"email"==e.type?a("a",{staticClass:"relative ml1",attrs:{href:"mailto:"+e.url}},[t._v(t._s(t.labelOrLink(e)))]):t._e()],t._v(" "),t.editMode?[a("span",{staticClass:"f6"},[t._v(t._s(t.labelOrLink(e)))]),t._v(" "),a("a",{staticClass:"f6",attrs:{href:"#","data-cy":"team-useful-link-"+e.id+"-destroy"},on:{click:function(a){return a.preventDefault(),t.removeLink(e)}}},[t._v(t._s(t.$t("app.remove")))])]:t._e()],2)})),t._v(" "),0==t.addMode&&t.teamMemberOrAtLeastHR()?a("li",{staticClass:"mt3"},[t.editMode?t._e():a("a",{staticClass:"bb b--dotted bt-0 bl-0 br-0 pointer f6",attrs:{href:"","data-cy":"useful-link-add-new-link"},on:{click:function(e){e.preventDefault(),t.addMode=!0}}},[a("span",[t._v("+")]),t._v(" "+t._s(t.$t("team.useful_link_cta")))]),t._v(" "),!t.editMode&&t.updatedLinks.length>0?a("span",{staticClass:"moon-gray"},[t._v("|")]):t._e(),t._v(" "),!t.editMode&&t.updatedLinks.length>0?a("a",{staticClass:"bb b--dotted bt-0 bl-0 br-0 pointer f6",attrs:{href:"","data-cy":"useful-link-edit-links"},on:{click:function(e){e.preventDefault(),t.editMode=!0}}},[t._v(t._s(t.$t("team.useful_link_edit")))]):t._e(),t._v(" "),t.editMode?a("a",{staticClass:"bb b--dotted bt-0 bl-0 br-0 pointer f6",attrs:{href:"","data-cy":"useful-link-exit-edit-link"},on:{click:function(e){e.preventDefault(),t.editMode=!1}}},[t._v(t._s(t.$t("team.useful_link_exit_edit_mode")))]):t._e()]):t._e()],2),t._v(" "),t.addMode?[a("form",{staticClass:"mt3",on:{submit:function(e){return e.preventDefault(),t.submit()}}},[t.form.errors.length>0?[a("div",{staticClass:"cf pb1 w-100 mb2"},[a("errors",{attrs:{errors:t.form.errors}})],1)]:t._e(),t._v(" "),a("label",{staticClass:"lh-copy f6"},[t._v("\n          "+t._s(t.$t("team.useful_link_type_of_link"))+"\n        ")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.type,expression:"form.type"}],staticClass:"mb3",attrs:{required:"","data-cy":"useful-link-type"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.form,"type",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"url"}},[t._v("\n            "+t._s(t.$t("team.useful_link_form_url"))+"\n          ")]),t._v(" "),a("option",{attrs:{value:"email"}},[t._v("\n            "+t._s(t.$t("team.useful_link_form_email"))+"\n          ")]),t._v(" "),a("option",{attrs:{value:"slack"}},[t._v("\n            "+t._s(t.$t("team.useful_link_form_slack"))+"\n          ")])]),t._v(" "),a("text-input",{attrs:{id:"label",name:"label",datacy:"link-label-input",errors:t.$page.errors.label,label:t.$t("team.useful_link_new_label"),help:t.$t("team.useful_link_new_label_help")},model:{value:t.form.label,callback:function(e){t.$set(t.form,"label",e)},expression:"form.label"}}),t._v(" "),a("text-input",{attrs:{id:"url",name:"url",datacy:"link-url-input",errors:t.$page.errors.url,label:t.$t("team.useful_link_new_url"),help:t.$t("team.useful_link_new_url_help"),required:!0},model:{value:t.form.url,callback:function(e){t.$set(t.form,"url",e)},expression:"form.url"}}),t._v(" "),a("div",{staticClass:"mb0"},[a("div",{staticClass:"flex-ns justify-between"},[a("div",[a("a",{staticClass:"btn dib tc w-auto-ns w-100 mb2 pv2 ph3",on:{click:function(e){e.preventDefault(),t.addMode=!1}}},[t._v("\n                "+t._s(t.$t("app.cancel"))+"\n              ")])]),t._v(" "),a("loading-button",{attrs:{classes:"btn add w-auto-ns w-100 mb2 pv2 ph3",state:t.loadingState,text:t.$t("app.add"),"cypress-selector":"useful-link-submit-button"}})],1)])],2)]:t._e()],2)])}),[],!1,null,"b0d6e782",null);e.default=o.exports}}]);
//# sourceMappingURL=14.js.map?id=6ed834f4b142e7309ef8