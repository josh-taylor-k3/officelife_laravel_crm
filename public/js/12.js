(window.webpackJsonp=window.webpackJsonp||[]).push([[12,59],{FUPM:function(e,t,a){var r=a("GqqJ");"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(r,n);r.locals&&(e.exports=r.locals)},GLrx:function(e,t,a){"use strict";var r=a("Hao9");a.n(r).a},GqqJ:function(e,t,a){(e.exports=a("I1BE")(!1)).push([e.i,".border-red[data-v-1482dffa] {\n  background-color: #fff5f5;\n  border-color: #fc8181;\n  color: #c53030;\n}",""])},Gwnh:function(e,t,a){"use strict";a.r(t);var r=a("rrJu"),n=a("nyzR"),s=(a("zHN7"),a("mM8D")),i=a("IQOQ"),o=a.n(i),l={components:{Errors:r.a,IconDelete:n.a,BallPulseLoader:s.a},directives:{clickOutside:o.a.directive},props:{team:{type:Object,default:null},userBelongsToTheTeam:{type:Boolean,default:!1}},data:function(){return{processingSearch:!1,hasMadeASearch:!1,editMode:!1,removeMode:!1,removalConfirmation:!1,potentialTeamLeads:[],form:{employeeId:0,searchTerm:null,errors:[]},updatedTeam:null}},created:function(){this.updatedTeam=this.team},methods:{displaySearch:function(){var e=this;this.editMode=!0,this.$nextTick((function(){e.$refs.search.focus()}))},hideRemovalMode:function(){this.removeMode=!1},search:_.debounce((function(){var e=this;""!=this.form.searchTerm&&(this.hasMadeASearch=!1,this.processingSearch=!0,axios.post("/"+this.$page.auth.company.id+"/teams/"+this.team.id+"/lead/search",this.form).then((function(t){e.potentialTeamLeads=t.data.data,e.processingSearch=!1,e.hasMadeASearch=!0})).catch((function(t){e.form.errors=_.flatten(_.toArray(t.response.data)),e.processingSearch=!1,e.hasMadeASearch=!1})))}),500),assign:function(e){var t=this;this.form.employeeId=e.id,axios.post("/"+this.$page.auth.company.id+"/teams/"+this.team.id+"/lead",this.form).then((function(e){t.$snotify.success(t.$t("team.team_lead_added"),{timeout:2e3,showProgressBar:!0,closeOnClick:!0,pauseOnHover:!0}),t.updatedTeam.team_leader=e.data.data,t.editMode=!1,t.$root.$emit("leadSet",e.data.data)})).catch((function(e){t.form.errors=_.flatten(_.toArray(e.response.data))}))},atLeastHR:function(){return this.$page.auth.employee.permission_level<=200},removeTeamLead:function(){var e=this;axios.delete("/"+this.$page.auth.company.id+"/teams/"+this.team.id+"/lead/"+this.updatedTeam.team_leader.id).then((function(t){e.$snotify.success(e.$t("team.team_lead_removed"),{timeout:2e3,showProgressBar:!0,closeOnClick:!0,pauseOnHover:!0}),e.updatedTeam.team_leader=null,e.removeMode=!1})).catch((function(t){e.form.errors=_.flatten(_.toArray(t.response.data))}))}}},d=(a("zrnk"),a("KHd+")),c=Object(d.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.updatedTeam.team_leader?[a("div",{staticClass:"lh-copy ma0 pa3 bb bb-gray"},[a("p",{staticClass:"silver f6 ma0 mb1"},[e._v(e._s(e.$t("team.team_lead_label")))]),e._v(" "),a("span",{staticClass:"pl3 db team-lead relative"},[a("img",{staticClass:"br-100 absolute avatar",attrs:{src:e.updatedTeam.team_leader.avatar}}),e._v(" "),a("inertia-link",{staticClass:"mb2",attrs:{href:"/"+e.$page.auth.company.id+"/employees/"+e.updatedTeam.team_leader.id,"data-cy":"current-team-lead"}},[e._v("\n          "+e._s(e.updatedTeam.team_leader.name)+"\n        ")]),e._v(" "),e.updatedTeam.team_leader.position?e._e():a("span",{staticClass:"db f7 mt1",attrs:{"data-cy":"team-lead-undefined"}},[e._v("\n          "+e._s(e.$t("app.no_position_defined"))+"\n        ")]),e._v(" "),e.updatedTeam.team_leader.position?a("span",{staticClass:"db f7 mt1"},[e._v("\n          "+e._s(e.updatedTeam.team_leader.position.title)+"\n        ")]):e._e(),e._v(" "),e.$page.auth.employee.permission_level<=200?a("img",{staticClass:"absolute right-0 pointer team-lead-action",attrs:{src:"/img/common/triple-dots.svg","data-cy":"display-remove-team-lead-modal"},on:{click:function(t){t.preventDefault(),e.removeMode=!0}}}):e._e(),e._v(" "),e.removeMode?[a("div",{directives:[{name:"show",rawName:"v-show",value:e.$page.auth.employee.permission_level<=200,expression:"$page.auth.employee.permission_level <= 200"},{name:"click-outside",rawName:"v-click-outside",value:e.hideRemovalMode,expression:"hideRemovalMode"}],staticClass:"popupmenu absolute br2 bg-white z-max tl pv2 ph3 bounceIn"},[a("ul",{staticClass:"list ma0 pa0"},[a("li",{directives:[{name:"show",rawName:"v-show",value:!e.removalConfirmation,expression:"!removalConfirmation"}],staticClass:"pv2 relative"},[a("icon-delete",{attrs:{classes:"icon-delete relative",width:15,height:15}}),e._v(" "),a("a",{staticClass:"pointer ml1 c-delete",attrs:{"data-cy":"remove-team-lead-button"},on:{click:function(t){t.preventDefault(),e.removalConfirmation=!0}}},[e._v("\n                  "+e._s(e.$t("team.team_lead_remove_confirmation"))+"\n                ")])],1),e._v(" "),a("li",{directives:[{name:"show",rawName:"v-show",value:e.removalConfirmation,expression:"removalConfirmation"}],staticClass:"pv2"},[e._v("\n                "+e._s(e.$t("app.sure"))+"\n                "),a("a",{staticClass:"c-delete mr1 pointer",attrs:{"data-cy":"confirm-remove-team-lead"},on:{click:function(t){return t.preventDefault(),e.removeTeamLead()}}},[e._v("\n                  "+e._s(e.$t("app.yes"))+"\n                ")]),e._v(" "),a("a",{staticClass:"pointer",on:{click:function(t){t.preventDefault(),e.removalConfirmation=!1}}},[e._v("\n                  "+e._s(e.$t("app.no"))+"\n                ")])])])])]:e._e()],2)])]:e._e(),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.updatedTeam.team_leader&&!e.editMode,expression:"!updatedTeam.team_leader && !editMode"}],staticClass:"lh-copy ma0 pa3 bb bb-gray"},[e.atLeastHR()?a("a",{staticClass:"bb b--dotted bt-0 bl-0 br-0 pointer",attrs:{"data-cy":"add-team-lead-blank-state"},on:{click:function(t){return t.preventDefault(),e.displaySearch()}}},[e._v(e._s(e.$t("team.team_lead_cta")))]):e._e(),e._v(" "),e.atLeastHR()?e._e():a("span",{staticClass:"f6"},[e._v("\n      "+e._s(e.$t("team.team_lead_blank"))+"\n    ")])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.editMode,expression:"editMode"}],staticClass:"pa3 bb bb-gray"},[a("form",{on:{submit:function(t){return t.preventDefault(),e.search(t)}}},[e.form.errors.length>0?[a("div",{staticClass:"cf pb1 w-100 mb2"},[a("errors",{attrs:{errors:e.form.errors}})],1)]:e._e(),e._v(" "),a("div",{staticClass:"mb3 relative"},[a("p",{staticClass:"mt0"},[e._v("Search employees "),a("a",{attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.editMode=!1}}},[e._v(e._s(e.$t("app.cancel")))])]),e._v(" "),a("div",{staticClass:"relative"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.searchTerm,expression:"form.searchTerm"}],ref:"search",staticClass:"br2 f5 w-100 ba b--black-40 pa2 outline-0",attrs:{id:"search",type:"text",name:"search",placeholder:e.$t("employee.hierarchy_search_placeholder"),required:"","data-cy":"search-team-lead"},domProps:{value:e.form.searchTerm},on:{keyup:function(t){return e.search()},keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.editMode=!1},input:function(t){t.target.composing||e.$set(e.form,"searchTerm",t.target.value)}}}),e._v(" "),e.processingSearch?a("ball-pulse-loader",{attrs:{color:"#5c7575",size:"7px"}}):e._e()],1)])],2),e._v(" "),a("div",{staticClass:"pl0 list ma0"},[e.potentialTeamLeads.length>0?a("ul",{staticClass:"list ma0 pl0"},e._l(e.potentialTeamLeads,(function(t){return a("li",{key:t.id,staticClass:"bb relative pv2 ph1 bb-gray bb-gray-hover"},[e._v("\n          "+e._s(t.name)+"\n          "),a("a",{staticClass:"absolute right-1 pointer",attrs:{"data-cy":"potential-team-lead-"+t.id},on:{click:function(a){return a.preventDefault(),e.assign(t)}}},[e._v("\n            "+e._s(e.$t("app.choose"))+"\n          ")])])})),0):e._e()]),e._v(" "),e.hasMadeASearch&&0==e.potentialTeamLeads.length?a("div",{staticClass:"silver"},[e._v("\n      "+e._s(e.$t("app.no_results"))+"\n    ")]):e._e()])],2)}),[],!1,null,"44da1ad2",null);t.default=c.exports},Hao9:function(e,t,a){var r=a("VhJa");"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(r,n);r.locals&&(e.exports=r.locals)},IQOQ:function(e,t,a){e.exports=function(){var e="__v-click-outside",t="undefined"!=typeof window,a="undefined"!=typeof navigator,r=t&&("ontouchstart"in window||a&&navigator.msMaxTouchPoints>0)?["touchstart"]:["click"];function n(t,a){var n=function(e){var t="function"==typeof e;if(!t&&"object"!=typeof e)throw new Error("v-click-outside: Binding value must be a function or an object");return{handler:t?e:e.handler,middleware:e.middleware||function(e){return e},events:e.events||r,isActive:!(!1===e.isActive)}}(a.value),s=n.handler,i=n.middleware;n.isActive&&(t[e]=n.events.map((function(e){return{event:e,handler:function(e){return function(e){var t=e.el,a=e.event,r=e.handler,n=e.middleware;a.target!==t&&!t.contains(a.target)&&n(a,t)&&r(a,t)}({event:e,el:t,handler:s,middleware:i})}}})),t[e].forEach((function(e){var t=e.event,a=e.handler;return setTimeout((function(){return document.documentElement.addEventListener(t,a,!1)}),0)})))}function s(t){(t[e]||[]).forEach((function(e){return document.documentElement.removeEventListener(e.event,e.handler,!1)})),delete t[e]}var i={bind:n,update:function(e,t){var a=t.value,r=t.oldValue;JSON.stringify(a)!==JSON.stringify(r)&&(s(e),n(e,{value:a}))},unbind:s};return{install:function(e){e.directive("click-outside",i)},directive:i}}()},Km7L:function(e,t,a){(e.exports=a("I1BE")(!1)).push([e.i,".avatar[data-v-44da1ad2] {\n  left: 1px;\n  top: 5px;\n  width: 35px;\n}\n.team-lead[data-v-44da1ad2] {\n  padding-left: 44px;\n}\n.ball-pulse[data-v-44da1ad2] {\n  right: 8px;\n  top: 10px;\n  position: absolute;\n}\n.team-lead-action[data-v-44da1ad2] {\n  top: 22px;\n}\n.popupmenu[data-v-44da1ad2] {\n  right: -4px;\n}",""])},"SL/y":function(e,t,a){"use strict";var r=a("FUPM");a.n(r).a},TmqM:function(e,t,a){var r=a("Km7L");"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(r,n);r.locals&&(e.exports=r.locals)},VhJa:function(e,t,a){(e.exports=a("I1BE")(!1)).push([e.i,"\nsvg[data-v-0229880e] {\n  color: #b8394c;\n}\n",""])},nyzR:function(e,t,a){"use strict";var r={props:{classes:{type:String,default:""},width:{type:Number,default:0},height:{type:Number,default:0}}},n=(a("GLrx"),a("KHd+")),s=Object(n.a)(r,(function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{class:this.classes,attrs:{xmlns:"http://www.w3.org/2000/svg",width:this.width,height:this.height,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[t("polyline",{attrs:{points:"3 6 5 6 21 6"}}),this._v(" "),t("path",{attrs:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}}),this._v(" "),t("line",{attrs:{x1:"10",y1:"11",x2:"10",y2:"17"}}),t("line",{attrs:{x1:"14",y1:"11",x2:"14",y2:"17"}})])}),[],!1,null,"0229880e",null);t.a=s.exports},rrJu:function(e,t,a){"use strict";var r={props:{errors:{type:Array,default:function(){return[]}}}},n=(a("SL/y"),a("KHd+")),s=Object(n.a)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.errors.length>0?a("div",{staticClass:"border-red ba br3 pa3"},[a("p",{staticClass:"mv0 fw6"},[e._v(e._s(e.$t("app.error_title")))]),e._v(" "),a("p",{staticClass:"mb0"},[e._v(e._s(e.errors[0]))])]):e._e()}),[],!1,null,"1482dffa",null);t.a=s.exports},zrnk:function(e,t,a){"use strict";var r=a("TmqM");a.n(r).a}}]);
//# sourceMappingURL=12.js.map?id=2559f26eab7d9054eccb