(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{"+n1l":function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,"\n.positions-list[data-v-562fae4d] {\n  max-height: 150px;\n}\n.popupmenu[data-v-562fae4d] {\n  right: 2px;\n  top: 26px;\n  width: 280px;\n}\n.c-delete[data-v-562fae4d]:hover {\n  border-bottom-width: 0;\n}\n",""])},"5n2/":function(t,e){function n(t){return"function"==typeof t.value||(console.warn("[Vue-click-outside:] provided expression",t.expression,"is not a function."),!1)}function o(t){return void 0!==t.componentInstance&&t.componentInstance.$isServer}t.exports={bind:function(t,e,i){function s(e){if(i.context){var n=e.path||e.composedPath&&e.composedPath();n&&n.length>0&&n.unshift(e.target),t.contains(e.target)||function(t,e){if(!t||!e)return!1;for(var n=0,o=e.length;n<o;n++)try{if(t.contains(e[n]))return!0;if(e[n].contains(t))return!1}catch(t){return!1}return!1}(i.context.popupItem,n)||t.__vueClickOutside__.callback(e)}}n(e)&&(t.__vueClickOutside__={handler:s,callback:e.value},!o(i)&&document.addEventListener("click",s))},update:function(t,e){n(e)&&(t.__vueClickOutside__.callback=e.value)},unbind:function(t,e,n){!o(n)&&document.removeEventListener("click",t.__vueClickOutside__.handler),delete t.__vueClickOutside__}}},I30O:function(t,e,n){var o=n("+n1l");"string"==typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(o,i);o.locals&&(t.exports=o.locals)},"KHd+":function(t,e,n){"use strict";function o(t,e,n,o,i,s,a,r){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),o&&(c.functional=!0),s&&(c._scopeId="data-v-"+s),a?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=l):i&&(l=r?function(){i.call(this,this.$root.$options.shadowRoot)}:i),l)if(c.functional){c._injectStyles=l;var p=c.render;c.render=function(t,e){return l.call(e),p(t,e)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:t,options:c}}n.d(e,"a",function(){return o})},LlEc:function(t,e,n){"use strict";var o=n("I30O");n.n(o).a},dPCr:function(t,e,n){"use strict";n.r(e);var o=n("5n2/"),i={directives:{ClickOutside:n.n(o).a},props:{employee:{type:Object,default:null},notifications:{type:Array,default:null},positions:{type:Array,default:null}},data:function(){return{modal:!1,search:"",title:"",updatedEmployee:Object}},computed:{filteredList:function(){var t=this;return this.positions.filter(function(e){return e.title.toLowerCase().includes(t.search.toLowerCase())}).sort(function(t,e){return t.title<e.title?-1:t.title>e.title?1:0})}},mounted:function(){null!=this.employee.position&&(this.title=this.employee.position.title),this.updatedEmployee=this.$page.auth.employee,this.popupItem=this.$el},methods:{toggleModal:function(){this.modal=!1},assign:function(t){var e=this;axios.post("/"+this.$page.auth.company.id+"/employees/"+this.employee.id+"/position",t).then(function(t){e.$snotify.success(e.$t("employee.position_modal_assign_success"),{timeout:2e3,showProgressBar:!0,closeOnClick:!0,pauseOnHover:!0}),e.title=t.data.data.position.title,e.updatedEmployee=t.data.data,e.modal=!1}).catch(function(t){e.form.errors=_.flatten(_.toArray(t.response.data))})},reset:function(){var t=this;axios.delete("/"+this.$page.auth.company.id+"/employees/"+this.employee.id+"/position/"+this.updatedEmployee.position.id).then(function(e){t.$snotify.success(t.$t("employee.position_modal_unassign_success"),{timeout:2e3,showProgressBar:!0,closeOnClick:!0,pauseOnHover:!0}),t.title="",t.modal=!1,t.updatedEmployee=e.data.data}).catch(function(e){t.form.errors=_.flatten(_.toArray(e.response.data))})}}},s=(n("LlEc"),n("KHd+")),a=Object(s.a)(i,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"di relative"},[t.$page.auth.employee.permission_level<=200?n("span",{staticClass:"bb b--dotted bt-0 bl-0 br-0 pointer",attrs:{"data-cy":"open-position-modal"},on:{click:function(e){e.preventDefault(),t.modal=!0}}},[t._v(t._s(t.title))]):n("span",{attrs:{"data-cy":"position-title"}},[t._v(t._s(t.title))]),t._v(" "),t.$page.auth.employee.permission_level<=200?n("a",{directives:[{name:"show",rawName:"v-show",value:""==t.title,expression:"title == ''"}],staticClass:"pointer",attrs:{"data-cy":"open-position-modal-blank"},on:{click:function(e){e.preventDefault(),t.modal=!0}}},[t._v(t._s(t.$t("employee.position_modal_title")))]):n("span",{directives:[{name:"show",rawName:"v-show",value:""==t.title,expression:"title == ''"}]},[t._v(t._s(t.$t("employee.position_blank")))]),t._v(" "),t.modal?n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.toggleModal,expression:"toggleModal"}],staticClass:"popupmenu absolute br2 bg-white z-max tl bounceIn faster"},[n("p",{staticClass:"pa2 ma0 bb bb-gray"},[t._v("\n      "+t._s(t.$t("employee.position_modal_title"))+"\n    ")]),t._v(" "),n("form",{on:{submit:function(e){return e.preventDefault(),t.search(e)}}},[n("div",{staticClass:"relative pv2 ph2 bb bb-gray"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"br2 f5 w-100 ba b--black-40 pa2 outline-0",attrs:{id:"search",type:"text",name:"search",placeholder:t.$t("employee.position_modal_filter")},domProps:{value:t.search},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.toggleModal(e)},input:function(e){e.target.composing||(t.search=e.target.value)}}})])]),t._v(" "),n("ul",{staticClass:"pl0 list ma0 overflow-auto relative positions-list"},t._l(t.filteredList,function(e){return n("li",{key:e.id,staticClass:"pv2 ph3 bb bb-gray-hover bb-gray pointer",attrs:{"data-cy":"list-position-"+e.id},on:{click:function(n){return t.assign(e)}}},[t._v("\n        "+t._s(e.title)+"\n      ")])}),0),t._v(" "),""!=t.title?n("a",{staticClass:"pointer pv2 ph3 db no-underline c-delete bb-0",attrs:{"data-cy":"position-reset-button"},on:{click:t.reset}},[t._v(t._s(t.$t("employee.position_modal_reset")))]):t._e()]):t._e()])},[],!1,null,"562fae4d",null);e.default=a.exports}}]);